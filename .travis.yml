# This file was generated automatically from conda-smithy. To update this configuration,
# update the conda-forge.yml and/or the recipe/meta.yaml.

language: generic

os: osx
osx_image: xcode6.4

env:
  matrix:
    
    - CONDA_R=3.3.2
  global:
    # The BINSTAR_TOKEN secure variable. This is defined canonically in conda-forge.yml.
    - secure: "rzvdRXoq8jbGQVqPuYj4rkYM6J7+mcg0KQe/OASKytPPrmP/vV4/FYIZ5iaDGDH+INdjnSu3Bce3ALWbsbwN1lBNipI73oqRqrSwRIyKIzdp9oG88CNlWseKeR+yVCy9+uLiGHyi2k1L7rCpB3Gv8FOZaBor6FARv+ZdJlzu7+GZSc8Nf8RSAcKxr7N9Ib9+dqN4d3ARCwktp9nr1Er30WRJWDFMr5H6+2Q6DXJsdqvULfVPtrKriQjMZq1HIACZ0JNlOr3qrH27sVxMh7yDvclp1B6SlpzPxLJwo/kx3O4rihbtVjPoT3Ae/XjYqDy7qeK0W+StZvRslAqjqUeIHA3VEj6FuUoLeeagk1bRyhZvxJ0qGO6TwC7Fxes27KWFHmwebGK4fT3Eq10IWr7lJsNu7qp/7vAjhwOcyMedRjKRk333y5ZqeVrK8PKwR3lA2/JV9bIz8mDH6wc6tUdp1xUdXikvBi8j2aQIovud5LDv77qtDPhIfBdX7Z8gOQiZ9T6IkBXH36FXmfH6i3T1G1OGG7/aKRuDy4UAP8/c1jacrETZ3yQ/RVRl0IGe8fWP9FyGWU2URS2vsRJhH9N9ANyT3izX1ITwCz0qLA5RmFFQQBJE2klGLAsCXfqvRjR94e89lbsqm/6pOPQgNpR4lrJ+Xwb9ckzlIyDPw470+Xk="


before_install:
    # Fast finish the PR.
    - |
      (curl https://raw.githubusercontent.com/conda-forge/conda-forge-build-setup-feedstock/master/recipe/ff_ci_pr_build.py | \
          python - -v --ci "travis" "${TRAVIS_REPO_SLUG}" "${TRAVIS_BUILD_NUMBER}" "${TRAVIS_PULL_REQUEST}") || exit 1

    # Remove homebrew.
    - |
      echo ""
      echo "Removing homebrew from Travis CI to avoid conflicts."
      curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall > ~/uninstall_homebrew
      chmod +x ~/uninstall_homebrew
      ~/uninstall_homebrew -fq
      rm ~/uninstall_homebrew


install:
    # Install Miniconda.
    - |
      echo ""
      echo "Installing a fresh version of Miniconda."
      MINICONDA_URL="https://repo.continuum.io/miniconda"
      MINICONDA_FILE="Miniconda3-latest-MacOSX-x86_64.sh"
      curl -L -O "${MINICONDA_URL}/${MINICONDA_FILE}"
      bash $MINICONDA_FILE -b

    # Configure conda.
    - |
      echo ""
      echo "Configuring conda."
      source /Users/travis/miniconda3/bin/activate root
      conda config --remove channels defaults
      conda config --add channels defaults
      conda config --add channels conda-forge
      conda config --set show_channel_urls true
      conda install --yes --quiet conda-forge-build-setup
      source run_conda_forge_build_setup

script:
  - conda build ./recipe

  - upload_or_check_non_existence ./recipe conda-forge --channel=main
